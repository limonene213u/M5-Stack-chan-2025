# ã‚¹ã‚¿ãƒƒã‚¯ãƒãƒ£ãƒ³ é€šä¿¡ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ 2025

æ—¥æœ¬èª | [English](README_en.md)

ã‚¹ã‚¿ãƒƒã‚¯ãƒãƒ£ãƒ³ã®é€šä¿¡æ©Ÿèƒ½ã«ç‰¹åŒ–ã—ãŸæ—¥æœ¬èªå¯¾å¿œãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã§ã™ã€‚WiFiè¤‡æ•°APå¯¾å¿œã€APãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆã€Bluetoothé€šä¿¡ã«ã‚ˆã£ã¦å¤–éƒ¨ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã€Avatarè¡¨ç¤ºæ©Ÿèƒ½ã‚’å«ã‚€å®Œå…¨ãªstack-chanå®Ÿè£…ã§ã™ã€‚

![Stack-chan Communication](docs/images/stack-chan-demo.png)

## âœ¨ ä¸»è¦æ©Ÿèƒ½

### ğŸŒ é€šä¿¡æ©Ÿèƒ½
- **WiFiè¤‡æ•°APå¯¾å¿œ**: æœ€å¤§10å€‹ã®WiFiãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ç™»éŒ²ãƒ»è‡ªå‹•æ¥ç¶š
- **APãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ**: ã‚¹ã‚¿ãƒƒã‚¯ãƒãƒ£ãƒ³è‡ªä½“ãŒWiFiã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«ãªã‚‹
- **è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: å…¨WiFiæ¥ç¶šå¤±æ•—æ™‚ã«è‡ªå‹•ã§APãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ
- **WebUI WiFiç®¡ç†**: ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰WiFiè¨­å®šã®è¿½åŠ ãƒ»å‰Šé™¤ãƒ»åˆ‡ã‚Šæ›¿ãˆ
- **Bluetoothé€šä¿¡**: ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡

### ğŸ¨ è¡¨ç¤ºãƒ»Avataræ©Ÿèƒ½
- **ğŸ—¾ æ—¥æœ¬èªå®Œå…¨å¯¾å¿œ**: M5GFXå†…è”µæ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆãƒ»æ–‡å­—åŒ–ã‘è§£æ±ºæ¸ˆã¿
- **ğŸ˜Š Avatarè¡¨æƒ…ã‚·ã‚¹ãƒ†ãƒ **: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨æƒ…å¤‰æ›´ï¼ˆHappyã€Sleepyã€Doubtç­‰ï¼‰
- **ğŸ“± WebUIæ“ä½œ**: ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ»è¡¨æƒ…å¤‰æ›´
- **ğŸ”Š éŸ³å£°æº–å‚™**: å°†æ¥ã®TTS/éŸ³å£°èªè­˜æ©Ÿèƒ½ã«å¯¾å¿œã—ãŸè¨­è¨ˆ

### âš¡ æŠ€è¡“çš„ç‰¹å¾´
- **StackchanSystemConfigå¯¾å¿œ**: å…¬å¼stack-chanè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å®Œå…¨å¯¾å¿œ
- **FreeRTOSæœ€é©åŒ–**: Avataræ©Ÿèƒ½ã¨ã®å®‰å®šã—ãŸå…±å­˜
- **æ‹¡å¼µæ€§é‡è¦–**: ChatGPT APIç­‰ã®é«˜åº¦ãªæ©Ÿèƒ½ã¸ã®ç™ºå±•åŸºç›¤

## ğŸ“š æŠ€è¡“å‚è€ƒãƒ»æ¯”è¼ƒ

### åŸºç›¤å®Ÿè£…
- **å…ƒå®Ÿè£…**: TakaoAkaki/stack-chan-tester
- **å‚è€ƒäº‹ä¾‹**: M5Unified_StackChan_ChatGPT
- **ç™ºå±•æ–¹å‘**: ä¼šè©±AIæ©Ÿèƒ½ã¸ã®æ‹¡å¼µ

### å®Ÿè£…æ¯”è¼ƒè¡¨

| æ©Ÿèƒ½ | æœ¬å®Ÿè£… | ChatGPTç‰ˆ | å…ƒå®Ÿè£… |
|------|-------|---------|--------|
| WiFiç®¡ç† | âœ… è¤‡æ•°AP | âœ… SmartConfig | âŒ å˜ä¸€ã®ã¿ |
| Avatarè¡¨ç¤º | âœ… åŸºæœ¬æ©Ÿèƒ½ | âœ… è¡¨æƒ…é€£å‹• | âœ… åŸºæœ¬ |
| æ—¥æœ¬èªå¯¾å¿œ | âœ… M5GFXå†…è”µ | âœ… efontJA_16 | âŒ åˆ¶é™ |
| WebUI | âœ… è¨­å®šç®¡ç† | âœ… ãƒãƒ£ãƒƒãƒˆ | âŒ ãªã— |
| éŸ³å£°æ©Ÿèƒ½ | â³ æº–å‚™ä¸­ | âœ… TTS+èªè­˜ | âŒ ãªã— |
| AIæ©Ÿèƒ½ | â³ å°†æ¥å¯¾å¿œ | âœ… ChatGPT | âŒ ãªã— |

## ğŸ¯ å¯¾å¿œãƒ‡ãƒã‚¤ã‚¹

- **M5Stack Basic (Grey)** âœ… **æ¨å¥¨ãƒ»é–‹ç™ºåŸºæº–**
- M5Stack Core2 âœ… **å‹•ä½œç¢ºèªæ¸ˆã¿**
- M5Stack CoreS3 âœ… 
- M5Stack Fire âœ…
- M5Stack Core1 (ä¸€éƒ¨åˆ¶é™ã‚ã‚Š)

## âš™ï¸ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ»ä½¿ã„æ–¹

### 1. WiFiè¨­å®š

`data/yaml/SC_BasicConfig.yaml`ãƒ•ã‚¡ã‚¤ãƒ«ã§WiFiè¨­å®šã‚’è¡Œã„ã¾ã™ï¼š

```yaml
wifi:
  # WiFiã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®šï¼ˆæœ€å¤§10å€‹ã¾ã§ç™»éŒ²å¯èƒ½ï¼‰
  networks:
    - ssid: "Home-WiFi"         # è‡ªå®…WiFi
      password: "password123"
      priority: 1               # å„ªå…ˆåº¦ï¼ˆ1ãŒæœ€é«˜ï¼‰
    - ssid: "Office-WiFi"       # ã‚ªãƒ•ã‚£ã‚¹WiFi
      password: "office456" 
      priority: 2
    - ssid: "Mobile-Hotspot"    # ãƒ¢ãƒã‚¤ãƒ«ãƒ›ãƒƒãƒˆã‚¹ãƒãƒƒãƒˆ
      password: "mobile789"
      priority: 3
  
  # ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆãƒ¢ãƒ¼ãƒ‰è¨­å®š
  ap_mode:
    enable: false               # èµ·å‹•æ™‚ã®APãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–
    ssid: "Stack-chan"          # APã®SSID
    password: "Stack-chan-88"   # APã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
    auto_fallback: true         # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ¥ç¶šå¤±æ•—æ™‚ã®è‡ªå‹•APãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿
```

### 2. ãƒ“ãƒ«ãƒ‰ã¨æ›¸ãè¾¼ã¿

```bash
# M5Stack Basic (Grey) - æ¨å¥¨
pio run -e m5stack-grey

# M5Stack Core2
pio run -e m5stack-core2

# æ›¸ãè¾¼ã¿ (ãƒ‡ãƒã‚¤ã‚¹ã«å¿œã˜ã¦ç’°å¢ƒåã‚’å¤‰æ›´)
pio run -e m5stack-grey -t upload

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ æ›¸ãè¾¼ã¿ï¼ˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç”¨ï¼‰
pio run -e m5stack-grey -t uploadfs
```

## ğŸ“± ä½¿ã„æ–¹

### WiFiæ¥ç¶š

1. **è‡ªå‹•æ¥ç¶š**: èµ·å‹•æ™‚ã«è¨­å®šã•ã‚ŒãŸWiFiãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«å„ªå…ˆåº¦é †ã§è‡ªå‹•æ¥ç¶š
2. **APãƒ¢ãƒ¼ãƒ‰**: å…¨æ¥ç¶šå¤±æ•—æ™‚ã¯è‡ªå‹•ã§APãƒ¢ãƒ¼ãƒ‰ï¼ˆSSID: Stack-chan, PASS: Stack-chan-88ï¼‰
3. **æ‰‹å‹•åˆ‡ã‚Šæ›¿ãˆ**: Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¾ãŸã¯ãƒœã‚¿ãƒ³ã§ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆå¯èƒ½

### Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

æ¥ç¶šæˆåŠŸå¾Œã€ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ãƒ¼ã¾ãŸã¯ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã€‚

#### ğŸ“‹ åˆ¶å¾¡ãƒ‘ãƒãƒ«æ©Ÿèƒ½

- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡**: ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã—ã¦ã‚¹ã‚¿ãƒƒã‚¯ãƒãƒ£ãƒ³ã«è¡¨ç¤º
- **è¡¨æƒ…å¤‰æ›´**: æ™®é€šãƒ»å¬‰ã—ã„ãƒ»çœ ã„ãƒ»ç–‘å•ã®4ç¨®é¡
- **WiFiç®¡ç†**: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¹ã‚­ãƒ£ãƒ³ãƒ»è¿½åŠ ãƒ»æ¥ç¶šãƒ»ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
- **ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çŠ¶æ…‹è¡¨ç¤º

#### ğŸ”Œ REST API

ç¾åœ¨ã®ã‚·ãƒ³ãƒ—ãƒ«ç‰ˆã§åˆ©ç”¨å¯èƒ½ãªAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼š

##### è¡¨æƒ…ã‚µã‚¤ã‚¯ãƒ«å¤‰æ›´

```http
GET /api/expression
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹: `Expression changed to: å¬‰ã—ã„`

##### è‰²ãƒ†ãƒ¼ãƒã‚µã‚¤ã‚¯ãƒ«å¤‰æ›´

```http
GET /api/color
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹: `Color changed to: é’ç³»`

##### ç‰¹å®šè‰²ãƒ†ãƒ¼ãƒè¨­å®š

```http
GET /api/setcolor?index=0
```

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:

- `index`: è‰²ãƒ†ãƒ¼ãƒç•ªå· (0-5)
  - `0`: æ¨™æº–è‰²
  - `1`: é’ç³»
  - `2`: ç·‘ç³»  
  - `3`: èµ¤ç³»
  - `4`: ç´«ç³»
  - `5`: ã‚ªãƒ¬ãƒ³ã‚¸ç³»

ãƒ¬ã‚¹ãƒãƒ³ã‚¹: `Color set to: èµ¤ç³»`

##### è¡¨æƒ…ã¨ã‚»ãƒªãƒ•ã®åŒæ™‚è¨­å®š

```http
GET /api/set?expression=1&speech=ã“ã‚“ã«ã¡ã¯ï¼
```

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:

- `expression`: è¡¨æƒ…ç•ªå· (0-3)
  - `0`: æ™®é€š (Neutral)
  - `1`: å¬‰ã—ã„ (Happy)
  - `2`: çœ ã„ (Sleepy)
  - `3`: å›°ã£ãŸ (Doubt)
- `speech`: è¡¨ç¤ºã™ã‚‹ã‚»ãƒªãƒ•ï¼ˆæ—¥æœ¬èªå¯¾å¿œã€URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰æ¨å¥¨ï¼‰

ãƒ¬ã‚¹ãƒãƒ³ã‚¹: `è¡¨æƒ…: å¬‰ã—ã„, ã‚»ãƒªãƒ•: "ã“ã‚“ã«ã¡ã¯ï¼"`

##### ã‚»ãƒªãƒ•ã‚¯ãƒªã‚¢

```http
GET /api/set?speech=
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹: `ã‚»ãƒªãƒ•: ""`

### APIã®ä½¿ç”¨ä¾‹

#### cURLã§ã®æ“ä½œä¾‹

```bash
# è¡¨æƒ…ã‚’å¬‰ã—ã„ã«ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
curl "http://192.168.1.100/api/set?expression=1&speech=Hello%20World"

# è‰²ã‚’èµ¤ç³»ã«å¤‰æ›´
curl "http://192.168.1.100/api/setcolor?index=3"

# ã‚»ãƒªãƒ•ã‚’ã‚¯ãƒªã‚¢
curl "http://192.168.1.100/api/set?speech="
```

#### JavaScriptã§ã®æ“ä½œä¾‹

```javascript
// è¡¨æƒ…ã¨ã‚»ãƒªãƒ•ã‚’è¨­å®š
fetch('/api/set?expression=1&speech=' + encodeURIComponent('ã“ã‚“ã«ã¡ã¯ï¼'))
  .then(response => response.text())
  .then(data => console.log(data));

// è‰²ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«å¤‰æ›´
const colorIndex = Math.floor(Math.random() * 6);
fetch(`/api/setcolor?index=${colorIndex}`)
  .then(response => response.text())
  .then(data => console.log(data));
```

#### Pythonã§ã®æ“ä½œä¾‹

```python
import requests
import urllib.parse

# Stack-chanã®IPã‚¢ãƒ‰ãƒ¬ã‚¹
base_url = "http://192.168.1.100"

# è¡¨æƒ…ã¨ã‚»ãƒªãƒ•ã‚’è¨­å®š
speech = "Pythonã‹ã‚‰ã“ã‚“ã«ã¡ã¯ï¼"
encoded_speech = urllib.parse.quote(speech)
response = requests.get(f"{base_url}/api/set?expression=1&speech={encoded_speech}")
print(response.text)

# è‰²ã‚’é’ç³»ã«å¤‰æ›´
response = requests.get(f"{base_url}/api/setcolor?index=1")
print(response.text)
```

### ã‚ˆã‚Šè©³ã—ã„Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¾‹

ä»¥ä¸‹ã¯å®Ÿç”¨çš„ãªStack-chanåˆ¶å¾¡ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã™ï¼š

#### åŸºæœ¬çš„ãªStack-chanã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¯ãƒ©ã‚¹

```python
import requests
import urllib.parse
import time
import random
from typing import Optional

class StackChanClient:
    """Stack-chanåˆ¶å¾¡ç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¯ãƒ©ã‚¹"""
    
    EXPRESSIONS = {
        'neutral': 0,    # æ™®é€š
        'happy': 1,      # å¬‰ã—ã„
        'sleepy': 2,     # çœ ã„
        'doubt': 3       # å›°ã£ãŸ
    }
    
    COLORS = {
        'default': 0,    # æ¨™æº–è‰²
        'blue': 1,       # é’ç³»
        'green': 2,      # ç·‘ç³»
        'red': 3,        # èµ¤ç³»
        'purple': 4,     # ç´«ç³»
        'orange': 5      # ã‚ªãƒ¬ãƒ³ã‚¸ç³»
    }
    
    def __init__(self, ip_address: str = "192.168.1.100", timeout: int = 5):
        """
        Stack-chanã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’åˆæœŸåŒ–
        
        Args:
            ip_address: Stack-chanã®IPã‚¢ãƒ‰ãƒ¬ã‚¹
            timeout: ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆç§’ï¼‰
        """
        self.base_url = f"http://{ip_address}"
        self.timeout = timeout
    
    def _make_request(self, endpoint: str) -> Optional[str]:
        """APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œ"""
        try:
            response = requests.get(f"{self.base_url}{endpoint}", timeout=self.timeout)
            response.raise_for_status()
            return response.text
        except requests.exceptions.RequestException as e:
            print(f"ã‚¨ãƒ©ãƒ¼: {e}")
            return None
    
    def set_expression_and_speech(self, expression: str, speech: str) -> bool:
        """è¡¨æƒ…ã¨ã‚»ãƒªãƒ•ã‚’åŒæ™‚ã«è¨­å®š"""
        if expression not in self.EXPRESSIONS:
            print(f"ç„¡åŠ¹ãªè¡¨æƒ…: {expression}")
            return False
        
        exp_num = self.EXPRESSIONS[expression]
        encoded_speech = urllib.parse.quote(speech)
        endpoint = f"/api/set?expression={exp_num}&speech={encoded_speech}"
        
        result = self._make_request(endpoint)
        if result:
            print(f"è¨­å®šå®Œäº†: {result}")
            return True
        return False
    
    def set_color(self, color: str) -> bool:
        """è‰²ãƒ†ãƒ¼ãƒã‚’è¨­å®š"""
        if color not in self.COLORS:
            print(f"ç„¡åŠ¹ãªè‰²: {color}")
            return False
        
        color_num = self.COLORS[color]
        endpoint = f"/api/setcolor?index={color_num}"
        
        result = self._make_request(endpoint)
        if result:
            print(f"è‰²å¤‰æ›´å®Œäº†: {result}")
            return True
        return False
    
    def cycle_expression(self) -> bool:
        """è¡¨æƒ…ã‚’ã‚µã‚¤ã‚¯ãƒ«å¤‰æ›´"""
        result = self._make_request("/api/expression")
        if result:
            print(f"è¡¨æƒ…å¤‰æ›´: {result}")
            return True
        return False
    
    def cycle_color(self) -> bool:
        """è‰²ã‚’ã‚µã‚¤ã‚¯ãƒ«å¤‰æ›´"""
        result = self._make_request("/api/color")
        if result:
            print(f"è‰²å¤‰æ›´: {result}")
            return True
        return False
    
    def clear_speech(self) -> bool:
        """ã‚»ãƒªãƒ•ã‚’ã‚¯ãƒªã‚¢"""
        result = self._make_request("/api/set?speech=")
        if result:
            print("ã‚»ãƒªãƒ•ã‚¯ãƒªã‚¢å®Œäº†")
            return True
        return False

# ä½¿ç”¨ä¾‹
if __name__ == "__main__":
    # Stack-chanã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆ
    stackchan = StackChanClient("192.168.1.100")
    
    # åŸºæœ¬çš„ãªæ“ä½œ
    stackchan.set_expression_and_speech("happy", "ã“ã‚“ã«ã¡ã¯ï¼")
    time.sleep(2)
    
    stackchan.set_color("blue")
    time.sleep(2)
    
    stackchan.clear_speech()
```

#### ãƒ‡ãƒ¢ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¾‹

```python
import time
import random

def demo_expressions():
    """è¡¨æƒ…ãƒ‡ãƒ¢"""
    stackchan = StackChanClient("192.168.1.100")
    
    expressions = [
        ("happy", "å¬‰ã—ã„ã§ã™ï¼"),
        ("sleepy", "ã¡ã‚‡ã£ã¨çœ ã„ã‹ã‚‚..."),
        ("doubt", "ã†ãƒ¼ã‚“ã€ã©ã†ã—ã‚ˆã†ï¼Ÿ"),
        ("neutral", "æ™®é€šã®çŠ¶æ…‹ã§ã™")
    ]
    
    print("è¡¨æƒ…ãƒ‡ãƒ¢ã‚’é–‹å§‹...")
    for expression, speech in expressions:
        stackchan.set_expression_and_speech(expression, speech)
        time.sleep(3)

def demo_colors():
    """è‰²ãƒ†ãƒ¼ãƒãƒ‡ãƒ¢"""
    stackchan = StackChanClient("192.168.1.100")
    
    colors = ["blue", "green", "red", "purple", "orange", "default"]
    speeches = ["é’è‰²ã ã‚ˆ", "ç·‘è‰²ï¼", "èµ¤è‰²ã§ã™", "ç´«è‰²ã€œ", "ã‚ªãƒ¬ãƒ³ã‚¸è‰²", "æ¨™æº–è‰²ã«æˆ»ã£ãŸã‚ˆ"]
    
    print("è‰²ãƒ†ãƒ¼ãƒãƒ‡ãƒ¢ã‚’é–‹å§‹...")
    for color, speech in zip(colors, speeches):
        stackchan.set_color(color)
        stackchan.set_expression_and_speech("happy", speech)
        time.sleep(3)

def interactive_mode():
    """å¯¾è©±ãƒ¢ãƒ¼ãƒ‰"""
    stackchan = StackChanClient("192.168.1.100")
    
    print("å¯¾è©±ãƒ¢ãƒ¼ãƒ‰ã‚’é–‹å§‹ã—ã¾ã™ã€‚'quit'ã§çµ‚äº†ã€‚")
    
    while True:
        try:
            user_input = input("\nã‚»ãƒªãƒ•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„: ")
            if user_input.lower() == 'quit':
                break
            
            # ãƒ©ãƒ³ãƒ€ãƒ ã«è¡¨æƒ…ã‚’é¸æŠ
            expressions = list(StackChanClient.EXPRESSIONS.keys())
            random_expression = random.choice(expressions)
            
            stackchan.set_expression_and_speech(random_expression, user_input)
            
        except KeyboardInterrupt:
            break
    
    print("å¯¾è©±ãƒ¢ãƒ¼ãƒ‰ã‚’çµ‚äº†ã—ã¾ã™ã€‚")

# ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œéƒ¨
if __name__ == "__main__":
    print("Stack-chanåˆ¶å¾¡ãƒ—ãƒ­ã‚°ãƒ©ãƒ ")
    print("1: è¡¨æƒ…ãƒ‡ãƒ¢")
    print("2: è‰²ãƒ†ãƒ¼ãƒãƒ‡ãƒ¢") 
    print("3: å¯¾è©±ãƒ¢ãƒ¼ãƒ‰")
    
    choice = input("é¸æŠã—ã¦ãã ã•ã„ (1-3): ")
    
    if choice == "1":
        demo_expressions()
    elif choice == "2":
        demo_colors()
    elif choice == "3":
        interactive_mode()
    else:
        print("ç„¡åŠ¹ãªé¸æŠã§ã™ã€‚")
```

#### å®šæœŸå®Ÿè¡Œãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¾‹

```python
import schedule
import time
from datetime import datetime

def hourly_greeting():
    """æ¯æ™‚ã®æŒ¨æ‹¶"""
    stackchan = StackChanClient("192.168.1.100")
    now = datetime.now()
    
    if 6 <= now.hour < 12:
        stackchan.set_expression_and_speech("happy", "ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼")
    elif 12 <= now.hour < 18:
        stackchan.set_expression_and_speech("neutral", "ã“ã‚“ã«ã¡ã¯ï¼")
    else:
        stackchan.set_expression_and_speech("sleepy", "ãŠç–²ã‚Œæ§˜ã§ã™")

def random_color_change():
    """ãƒ©ãƒ³ãƒ€ãƒ è‰²å¤‰æ›´"""
    stackchan = StackChanClient("192.168.1.100")
    colors = list(StackChanClient.COLORS.keys())
    random_color = random.choice(colors)
    stackchan.set_color(random_color)

# ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š
schedule.every().hour.do(hourly_greeting)
schedule.every(30).minutes.do(random_color_change)

print("å®šæœŸå®Ÿè¡Œãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’é–‹å§‹...")
while True:
    schedule.run_pending()
    time.sleep(1)
```

#### å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install requests schedule
```

### ã‚»ãƒªãƒ•è‡ªå‹•ãƒ«ãƒ¼ãƒ—æ©Ÿèƒ½

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨­å®šã—ãŸã‚»ãƒªãƒ•ã¯30ç§’å¾Œã«è‡ªå‹•çš„ã«ã‚¯ãƒªã‚¢ã•ã‚Œã¾ã™
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`simple_wifi_config.h`ï¼‰ã«ãƒ©ãƒ³ãƒ€ãƒ ã‚»ãƒªãƒ•ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹å ´åˆã€è‡ªå‹•çš„ã«ãƒ«ãƒ¼ãƒ—è¡¨ç¤ºã•ã‚Œã¾ã™
- ãƒ©ãƒ³ãƒ€ãƒ ã‚»ãƒªãƒ•ãŒç„¡åŠ¹ãªå ´åˆã¯ã€Œã‚¹ã‚¿ãƒƒã‚¯ã¡ã‚ƒã‚“ã€ã«æˆ»ã‚Šã¾ã™

### ãƒœã‚¿ãƒ³æ“ä½œ

- **ãƒœã‚¿ãƒ³A**: è¡¨æƒ…ã‚µã‚¤ã‚¯ãƒ«å¤‰æ›´ï¼ˆæ™®é€šâ†’å¬‰ã—ã„â†’çœ ã„â†’å›°ã£ãŸï¼‰
- **ãƒœã‚¿ãƒ³B**: WiFiå†æ¥ç¶š
- **ãƒœã‚¿ãƒ³C**: IP ã‚¢ãƒ‰ãƒ¬ã‚¹è¡¨ç¤º

### WebUIæ“ä½œ

ãƒ–ãƒ©ã‚¦ã‚¶ã§Stack-chanã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®æ©Ÿèƒ½ãŒåˆ©ç”¨ã§ãã¾ã™ï¼š

- **è¡¨æƒ…ã¨ã‚»ãƒªãƒ•ã®è¨­å®š**: ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã§è¡¨æƒ…ã‚’é¸æŠã—ã€ãƒ†ã‚­ã‚¹ãƒˆã§ã‚»ãƒªãƒ•ã‚’å…¥åŠ›
- **ã‚¯ã‚¤ãƒƒã‚¯æ“ä½œ**: è¡¨æƒ…ã‚µã‚¤ã‚¯ãƒ«ã€è‰²å¤‰æ›´ã€ã‚»ãƒªãƒ•ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³
- **è‰²ãƒ†ãƒ¼ãƒé¸æŠ**: 6ç¨®é¡ã®è‰²ãƒ†ãƒ¼ãƒã‚’ç›´æ¥é¸æŠ
- **ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹**: ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã€ç¨¼åƒæ™‚é–“ã€WiFiæƒ…å ±ã®è¡¨ç¤º

## è¨­å®šã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### WiFiè¨­å®šå¤‰æ›´

`src/simple_wifi_config.h` ã§WiFiè¨­å®šã‚’å¤‰æ›´ã§ãã¾ã™ï¼š

```cpp
const WiFiCredentials wifi_networks[] = {
  {"ã‚ãªãŸã®SSID", "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰", 1},
  {"äºˆå‚™ã®SSID", "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰", 2}, 
  {nullptr, nullptr, 0}  // çµ‚ç«¯ãƒãƒ¼ã‚«ãƒ¼
};
```

### ãƒ©ãƒ³ãƒ€ãƒ ã‚»ãƒªãƒ•è¨­å®š

åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ©ãƒ³ãƒ€ãƒ ã‚»ãƒªãƒ•ã‚’è¨­å®šã§ãã¾ã™ï¼š

```cpp
const char* random_speeches[] = {
  "ã‚«ã‚¹ã‚¿ãƒ ã‚»ãƒªãƒ•1",
  "ã‚«ã‚¹ã‚¿ãƒ ã‚»ãƒªãƒ•2",
  "ãŠå¥½ã¿ã®ã‚»ãƒªãƒ•",
  nullptr  // çµ‚ç«¯ãƒãƒ¼ã‚«ãƒ¼
};
```

ãƒ©ãƒ³ãƒ€ãƒ ã‚»ãƒªãƒ•ã‚’ç„¡åŠ¹ã«ã™ã‚‹å ´åˆï¼š

```cpp
const char* random_speeches[] = {
  nullptr  // çµ‚ç«¯ãƒãƒ¼ã‚«ãƒ¼ã®ã¿
};
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### WiFiæ¥ç¶šã§ããªã„

1. SSIDã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç¢ºèª
2. 2.4GHzå¸¯ã®WiFiã‚’ä½¿ç”¨
3. ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ãƒ¼ã§ã‚¨ãƒ©ãƒ¼ç¢ºèª

### WebUIã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„

1. WiFiæ¥ç¶šã‚’ç¢ºèª
2. ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ãƒ¼ã§IPã‚¢ãƒ‰ãƒ¬ã‚¹ç¢ºèª
3. ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œãªã„

1. URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ã„ã‹ç¢ºèª
2. APIå¿œç­”ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¢ºèª
3. ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ãƒ¼ã§ãƒ­ã‚°ç¢ºèª

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ä½œè€…

Based on TakaoAkaki's stack-chan-tester
